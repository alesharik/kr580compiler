# Компилятор Assembler под КР580

## Таблица команд
|        ASM        | описание                                                       |  
|:-----------------:|:---------------------------------------------------------------|
|    lset [mem]     | Псевдокоманда. Установить значение метки на аргумент           |
|    db [const]     | Псевдокоманда. Заменяется однобайтовым аргументом              |
|    dw [const]     | Псевдокоманда. Заменяется двухбайтовым аргументом (BIG ENDIAN) |
|        nop        | Не делает ничего                                               |
|     neg [reg]     | Инверсия регистра (только для `a` и `c`)                       |
| inc [reg/regpair] | Инкремент регистра или регистровой пары                        |
| dec [reg/regpair] | Декремент регистра или регистровой пары                        |
|  add [reg/const]  | Сложение                                                       |
|  adc [reg/const]  | Сложение с учётом переноса                                     |
|  sub [reg/const]  | Вычитание                                                      |
|  sbb [reg/const]  | Вычитание с учётом переноса                                    |
|  and [reg/const]  | Логическое И                                                   |
|  or [reg/const]   | Логическое ИЛИ                                                 |
|  xor [reg/const]  | Исключающее ИЛИ                                                |
|  cmp [reg/const]  | Сравнение                                                      |
|     jz .label     | Переход по метке, если установлен флаг нуля                    |
|    jnz .label     | Переход по метке, если не установлен флаг нуля                 |
|     jc .label     | Переход по метке, если установлен флаг переноса                |
|    jnc .label     | Переход по метке, если не установлен флаг переноса             |
|    jpo .label     | Переход по метке, если установлен флаг чётности                |
|    jpe .label     | Переход по метке, если не установлен флаг чётности             |
|     jp .label     | Переход по метке, если не установлен знак минуса               |
|     jm .label     | Переход по метке, если установлен знак минуса                  |
|    jmp .label     | Переход по метке                                               |
|    call .label    | Вызов процедуры по метке                                       |
|     cz .label     | Вызов процедуры по метке, если установлен флаг нуля            |
|    cnz .label     | Вызов процедуры по метке, если не установлен флаг нуля         |
|     cc .label     | Вызов процедуры по метке, если установлен флаг переноса        |
|    cnc .label     | Вызов процедуры по метке, если не установлен флаг переноса     |
|    cpo .label     | Вызов процедуры по метке, если установлен флаг чётности        |
|    cpe .label     | Вызов процедуры по метке, если не установлен флаг чётности     |
|     cp .label     | Вызов процедуры по метке, если не установлен знак минуса       |
|     cm .label     | Вызов процедуры по метке, если установлен знак минуса          |
|        ret        | Выход из процедуры                                             |
|        rz         | Выход из процедуры, если установлен флаг нуля                  |
|        rnz        | Выход из процедуры, если не установлен флаг нуля               |
|        rc         | Выход из процедуры, если установлен флаг переноса              |
|        rnc        | Выход из процедуры, если не установлен флаг переноса           |
|        rp0        | Выход из процедуры, если установлен флаг чётности              |
|        rpe        | Выход из процедуры, если не установлен флаг чётности           |
|        rp         | Выход из процедуры, если не установлен знак минуса             |
|        rm         | Выход из процедуры, если установлен знак минуса                |
|        daa        | Десятичная коррекция                                           |
|        rlc        | Циклический сдвиг влево                                        |
|        rrc        | Циклический сдвиг вправо                                       |
|        ral        | Сдвиг влево с переносом                                        |
|        rar        | Сдвиг вправо с переносом                                       |
|        stc        | Установка флага переноса в единицу                             |
|        cmc        | Инверсия флага переноса                                        |
|        in         | Ввод с порта                                                   |
|        out        | Вывод на порт                                                  |
|        hlt        | Остановить процессор                                           |
|        cli        | Отключить обработку прерываний                                 |
|        sti        | Включить обработку прерываний                                  |
|   mov [*], [*]    | Перенос значения из одного места в другое                      |
|    mov pc, hl     | запись значения HL в программный счётчик                       |
|   pop [regpair]   | Забрать регистровую пару со стека                              |
|  push [regpair]   | Положить регистровую пару на стек                              |
|      pop psw      | Забрать пару A + flags со стека                                |
|     push psw      | Положить пару A + flags на стек                                |

### Варианты аргумента `mov`
- `a, b, c, , e, h, l, m` - использование конкретного регистра
- `bc, de, hl, sp` - использование конкретной регистровой пары
- `[MEM]` - использование значения из памяти `MEM`
- `[de, hl, bc, hp]` - использование значения из памяти по адресу из регистровой пары
- `CONST` - использование константы/числа

Инструкции `mov de, hl` и `mov hl, de` эквивалентны и выполняют переключение данных между регистрами (DE = HL, HL = DE).\
Инструкции `mov hl, [sp]` и `mov [sp], hl` эквивалентны и выполняют переключение данных между HE и памяти по адресу SP.

